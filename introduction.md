# 第一章 緒論

## 1.1 研究背景

隨著人工智慧技術的快速發展，機器學習模型對於大量數據的需求日益增長。然而，在隱私意識提升和數據保護法規日趨嚴格的現代社會中，傳統的集中式機器學習面臨重大挑戰。數據隱私、法規遵循以及計算資源分散等問題促使聯邦學習（Federated Learning, FL）技術的興起。

聯邦學習作為一種分散式機器學習範式，允許多個參與者在不共享原始數據的前提下協作訓練全局模型。由Google於2016年提出的聯邦平均演算法（FedAvg）奠定了現代聯邦學習的基礎架構，該架構包含單一中央聚合器和多個客戶端，使用加權平均方式聚合各客戶端的模型更新。

然而，傳統聯邦學習架構在實際應用中面臨諸多挑戰：

1. **單點故障風險**：中央聚合器的可靠性直接影響整個系統運作
2. **信任機制缺失**：參與者對中央聚合器的信任假設在多方協作環境中難以保證
3. **惡意行為檢測困難**：缺乏有效機制檢測和防範惡意參與者的攻擊
4. **透明度不足**：聚合過程缺乏可驗證性，難以建立參與者間的信任

為解決上述問題，區塊鏈技術的引入為聯邦學習提供了新的發展方向。區塊鏈的去中心化特性、不可篡改性和智能合約功能，為建立可信的聯邦學習環境提供了技術基礎。然而，現有的區塊鏈聯邦學習方案多數仍採用傳統的拜占庭容錯（PBFT）共識機制，雖然提供了強安全性保障，卻因其**密集的多輪通信需求和高計算開銷**導致效能瓶頸。

## 1.2 研究動機

在分析現有區塊鏈聯邦學習方案的基礎上，本研究發現以下關鍵問題亟待解決：

### 1.2.1 效能與安全的平衡挑戰

現有方案在追求安全性的同時，往往犧牲了系統效能。採用完整PBFT共識的方案雖然能夠抵禦拜占庭錯誤，但其**需要所有驗證者參與每次聚合驗證的機制**使得系統在參與者數量增加時面臨嚴重的擴展性問題。相對地，僅使用區塊鏈作為不可變記錄的方案雖然效能較佳，但缺乏對惡意聚合器的有效防護機制。

### 1.2.2 資源利用效率不足

傳統PBFT共識要求所有參與者在每一輪都進行完整的共識過程，這導致大量不必要的計算和通信開銷。在大多數情況下，聚合過程是誠實的，**全時段的拜占庭容錯機制**顯得過於繁重。

### 1.2.3 多聚合器協作機制不完善

雖然一些研究提出了多聚合器的概念以提高系統可靠性，但缺乏有效的惡意聚合器檢測和處理機制。現有方案未能充分利用多聚合器的優勢來實現效能和安全性的最佳平衡。

### 1.2.4 缺乏適應性安全機制

現有方案多採用靜態的安全機制，無法根據系統狀態和威脅情況動態調整安全等級。這種設計缺乏靈活性，無法在不同安全需求下優化資源使用。

基於上述觀察，本研究提出了一個創新的想法：是否能夠結合Optimistic Rollup的樂觀假設原理與PBFT的拜占庭容錯能力，設計一個既具備高效能又能保證安全性的混合式聯邦學習框架？

## 1.3 論文目的

本論文旨在設計並實現一個基於區塊鏈的多聚合器聯邦學習框架，該框架採用創新的混合式Optimistic-PBFT安全聚合機制。具體目的包括：

### 1.3.1 主要目的

1. **設計混合式安全機制**：開發一個結合Optimistic Rollup樂觀原理與PBFT拜占庭容錯的安全聚合機制，在樂觀情況下採用**輕量級單聚合器機制**以實現高效運作，同時在面對挑戰時啟動**多驗證者共識機制**以提供強安全保護。

2. **實現多聚合器協作框架**：建立支援多個聚合器協作的系統架構，通過輪詢分配機制提高系統效能和可靠性，同時具備惡意聚合器檢測和排除能力。

3. **建立有效的挑戰驗證機制**：設計一個基於驗證者網路的挑戰機制，能夠在檢測到可疑行為時啟動PBFT共識，確保聚合結果的正確性。

### 1.3.2 次要目的

1. **驗證系統效能表現**：通過實驗評估系統在不同參數設置下的效能表現，包括處理時間、通信開銷和擴展性分析。

2. **評估安全性保障**：分析系統對各種攻擊模式的抵禦能力，特別是針對惡意聚合器的噪音攻擊和其他拜占庭行為。

3. **提供實用的實作框架**：基於Flower聯邦學習框架開發可用的原型系統，為後續研究提供驗證平台。

## 1.4 解決策略與研究貢獻

### 1.4.1 解決策略

本研究採用以下核心策略解決上述研究問題：

#### 1.4.1.1 混合式Optimistic-PBFT機制

結合Optimistic Rollup的樂觀假設與PBFT的拜占庭容錯特性：

- **樂觀模式**：在正常情況下假設聚合器誠實，使用**輕量級輪詢選擇機制**，僅需單一聚合器執行聚合運算
- **挑戰模式**：當檢測到可疑行為時，啟動**多驗證者並行驗證機制**，需要至少2f+1個驗證者參與共識

#### 1.4.1.2 多聚合器輪詢分配

實施公平的工作分配機制：
- 使用輪詢演算法在多個聚合器間分配聚合任務
- 每個聚合器在整個訓練過程中只需負責r/N的聚合工作（r為總輪數，N為聚合器數量）
- 動態排除機制，通過PoS質押方式排除被檢測出的惡意聚合器

#### 1.4.1.3 基於驗證者的挑戰機制

建立分散式驗證體系：
- 獨立驗證者網路監控聚合過程
- 延遲檢測機制模擬實際的挑戰期間
- PBFT共識收集至少2f+1個驗證結果確保安全性

#### 1.4.1.4 自適應恢復機制

實現智能恢復功能：
- 檢測到惡意行為後自動回滾至最後安全狀態
- 重新分配任務至誠實聚合器
- 維護安全參數歷史記錄支援回滾操作

### 1.4.2 研究貢獻

本研究的主要貢獻包括：

#### 1.4.2.1 理論貢獻

1. **混合式安全機制理論**：首次將Optimistic Rollup的樂觀原理系統性地應用於聯邦學習安全聚合，提出了一個理論框架平衡效能與安全性。

2. **多聚合器協作模型**：建立了支援惡意行為檢測與排除的多聚合器協作理論模型，證明在滿足PBFT假設下系統的安全性保障。

3. **資源效率分析**：分析了混合式方法在樂觀情況下採用**單聚合器輕量級機制**，而在挑戰情況下啟動**多驗證者密集驗證機制**的資源消耗特性和模式切換條件。

#### 1.4.2.2 系統貢獻

1. **可擴展架構設計**：提出了一個基於區塊鏈的可擴展聚合器架構，能夠根據系統需求動態調整聚合器數量。

2. **智能挑戰機制**：設計了一個自適應的挑戰驗證系統，能夠根據系統威脅等級動態調整驗證強度。

3. **原型系統實現**：基於Flower框架開發了完整的原型系統，驗證了理論設計的可行性和實用性。

#### 1.4.2.3 實驗貢獻

1. **綜合效能評估**：提供了多種場景下的系統效能基準測試，包括不同數量的客戶端、聚合器和惡意節點情況。

2. **安全性驗證**：通過模擬各種攻擊場景驗證了系統的安全性，特別是針對噪音攻擊的防護能力。

3. **比較分析**：與現有的區塊鏈聯邦學習方案進行了詳細的效能和安全性比較，證明了混合式方法的優越性。

#### 1.4.2.4 實際應用價值

1. **降低參與成本**：通過減少不必要的共識開銷，降低了參與者的計算和通信成本。

2. **提高系統可用性**：通過多聚合器設計和自動恢復機制，提高了系統的整體可用性和容錯能力。

3. **促進實際部署**：提供了一個實用的框架，為區塊鏈聯邦學習的實際部署奠定了基礎。

## 1.5 論文架構

本論文共分為七章，各章節內容安排如下：

**第一章 緒論**
- 闡述研究背景和動機
- 明確研究目的和預期貢獻
- 概述論文整體架構

**第二章 相關背景與技術基礎**
- 介紹聯邦學習的基本原理和演算法
- 闡述區塊鏈技術及其在聯邦學習中的應用
- 分析Optimistic Rollup的工作原理和特點
- 討論PBFT共識機制的理論基礎

**第三章 相關研究探討**
- 回顧現有區塊鏈聯邦學習方案的發展歷程
- 分析現有方案的優勢和局限性
- 比較不同安全機制的效能特徵
- 找出研究空白和改進方向

**第四章 系統架構設計**
- 提出混合式Optimistic-PBFT聯邦學習框架
- 設計多聚合器協作機制
- 詳述挑戰驗證和恢復流程
- 分析系統安全模型和假設條件

**第五章 系統實現**
- 描述技術棧和開發環境
- 詳述核心組件的實現方法
- 展示關鍵演算法的具體實作
- 説明實驗配置和測試環境

**第六章 實驗評估**
- 設計綜合性實驗評估方案
- 分析系統在不同場景下的效能表現
- 驗證安全機制的有效性
- 與現有方案進行比較評估

**第七章 結論與未來研究方向**
- 總結研究成果和貢獻
- 分析研究的局限性
- 提出未來研究方向和改進建議

---

通過以上架構，本論文將系統性地探討混合式Optimistic-PBFT在區塊鏈聯邦學習中的應用，從理論分析到實際實現，從效能評估到安全驗證，為這一新興技術領域提供有價值的研究成果和實用的解決方案。
